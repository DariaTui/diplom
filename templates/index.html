<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–µ—à–µ–Ω–∏–π</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<!-- –ö–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∫–∏ —Å –∏–∫–æ–Ω–∫–æ–π -->
<button id="help-button" title="–°–ø—Ä–∞–≤–∫–∞">?</button>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="help-modal" class="modal hidden">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <h2>–°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
  <h3>üìò –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å—Ä–µ–¥—ã (–ö–ë–°)?</h3>
  <p>
    –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å—Ä–µ–¥—ã (–ö–ë–°) ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å, –ø–æ–º–æ–≥–∞—é—â–∏–π –æ—Ü–µ–Ω–∏—Ç—å,
    –Ω–∞—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞.
    –û–Ω —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞.
  </p>
  <h3>üìä –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –ö–ë–°?</h3>
  <ul>
    <li>
      <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:</strong> –Ω–∞–ª–∏—á–∏–µ —Ä—è–¥–æ–º –∫–∞—Ñ–µ, –ø–∞—Ä–∫–æ–≤–æ–∫, –æ—Ç–µ–ª–µ–π –∏ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –£–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–≤–∏—Ç—É—é —Å—Ä–µ–¥—É, –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—É—é –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —É–¥–æ–±–Ω—É—é –¥–ª—è –±–∏–∑–Ω–µ—Å–∞.
    </li>
    <li>
      <strong>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:</strong> –±–ª–∏–∑–æ—Å—Ç—å –∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
    </li>
    <li>
      <strong>–î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</strong> –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Ä—è–¥–æ–º –¥–µ–ª–∞—é—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –¥–ª—è –ø–æ—Å–µ—â–µ–Ω–∏—è.
    </li>
    <li>
      <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤:</strong> –≤—ã—Å–æ–∫–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å —Ä–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ä—ã–Ω–æ–∫ –Ω–∞—Å—ã—â–µ–Ω –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏.
    </li>
    <li>
      <strong>–¢–∏–ø –ª–∞–Ω–¥—à–∞—Ñ—Ç–Ω–æ–π –∑–æ–Ω—ã:</strong> –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –µ—ë –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–∏–¥—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è –±–∏–∑–Ω–µ—Å–∞.
    </li>
  </ul>

  <h3>‚öñÔ∏è –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç –≤–µ—Å–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤?</h3>
  <p>
    –í–µ—Å–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–∫–∞–∑–∞—Ç—å –≤–∞–∂–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –ö–ë–°. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –≥–∏–±–∫–æ–π –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º–æ–π
    –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:
  </p>
  <ul>
    <li>–ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Å –º–∞—Ä—à—Ä—É—Ç–æ–≤, –µ—Å–ª–∏ –±–∏–∑–Ω–µ—Å –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤.</li>
    <li>–£–º–µ–Ω—å—à–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç.</li>
  </ul>
  <p>
    –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–µ—Å–∞ –ø–æ–º–æ–≥–∞—é—Ç —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞.
  </p>
</div>
</div>
    <div class="form-container">
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –±–∏–∑–Ω–µ—Å–∞</h3>
        <select id="business-type">
            <option value="public_eating">–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ</option>
            <option value="accommodation_places">–ú–µ—Å—Ç–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</option>
        </select>
        
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Å–æ–≤—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤</h3>
        <div class="select-grid">
        <!-- <div class="select-pair"> -->
        <label for="weight-other">–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:</label>
        <select id="weight-other">
            <option value="0">0 - –Ω–µ –≤–∞–∂–Ω–æ</option>
            <option value="1" selected>1 - –º–∞–ª–æ-–≤–∞–∂–Ω–æ</option>
            <option value="2">2 - –≤–∞–∂–Ω–æ</option>
            <option value="3">3 - –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ</option>
        </select>
        <!-- </div> -->
        <!-- <div class="select-pair"> -->
        <label for="weight-distance">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –º–∞—Ä—à—Ä—É—Ç–∞:</label>
        <select id="weight-distance">
            <option value="0">0 - –Ω–µ –≤–∞–∂–Ω–æ</option>
            <option value="1" selected>1 - –º–∞–ª–æ-–≤–∞–∂–Ω–æ</option>
            <option value="2">2 - –≤–∞–∂–Ω–æ</option>
            <option value="3">3 - –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ</option>
        </select>
        <!-- </div> -->
        <!-- <div class="select-pair"> -->
        <label for="weight-landmark">–î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</label>
        <select id="weight-landmark">
            <option value="0">0 - –Ω–µ –≤–∞–∂–Ω–æ</option>
            <option value="1" selected>1 - –º–∞–ª–æ-–≤–∞–∂–Ω–æ</option>
            <option value="2">2 - –≤–∞–∂–Ω–æ</option>
            <option value="3">3 - –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ</option>

        </select>
        <!-- </div> -->
        <!-- <div class="select-pair"> -->
        <label for="weight-density">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤:</label>
        <select id="weight-density">
            <option value="0">0 - –Ω–µ –≤–∞–∂–Ω–æ</option>
            <option value="1" selected>1 - –º–∞–ª–æ-–≤–∞–∂–Ω–æ</option>
            <option value="2">2 - –≤–∞–∂–Ω–æ</option>
            <option value="3">3 - –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ</option>
        </select>
        <!-- </div> -->
        <!-- <div class="select-pair"> -->
        <label for="weight-zone">–õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –∑–æ–Ω–∞:</label>
        <select id="weight-zone">
            <option value="0">0</option>
            <option value="1" selected>1 - –º–∞–ª–æ-–≤–∞–∂–Ω–æ</option>
            <option value="2">2 - –≤–∞–∂–Ω–æ</option>
            <option value="3">3 - –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ</option>

        </select>

        </div>
        <button id="update-map">–û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç—É</button>

        <button id="switch-map">–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—Ç—É –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞</button>

        <h3>–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—Ç—É –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏</h3>
        <select id="density_obj">
            <option value="public_eating">–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ</option>
            <option value="accommodation_places">–ú–µ—Å—Ç–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</option>
            <option value="landmarks">–î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</option>
        </select>
        <button id="toggle-filters">–§–∏–ª—å—Ç—Ä—ã</button>

        <!-- –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è -->
        <div id="public-eating-filters" class="hidden">
            <h4>–§–∏–ª—å—Ç—Ä—ã</h4>
            <label>–¶–µ–Ω–∞:</label>
            <select id="cat-price">
                <option value="" selected>–í—Å–µ</option>
                <option value="1000-2000">–û—Ç 1000 –¥–æ 2000</option>
                <option value="2000-3000">–û—Ç 2000 –¥–æ 3000</option>
                <option value="3000-1000000">–û—Ç 3000 –∏ –≤—ã—à–µ</option>
            </select>

            <label>–†–µ–π—Ç–∏–Ω–≥:</label>
            <select id="cat-rating">
                <option value="" selected>–í—Å–µ</option>
                <option value="0-3.0">–î–æ 3.0</option>
                <option value="3.0-4.5">–û—Ç 3.0 –¥–æ 4.5</option>
                <option value="4.5-5.0">–û—Ç 4.5 –¥–æ 5.0</option>
            </select>

            <label>–ö—É—Ö–Ω—è:</label>
            <select id="cat-cuisine">
                <option value="">–í—Å–µ</option>
                <option value="–±—É—Ä—è—Ç—Å–∫–∞—è">–ë—É—Ä—è—Ç—Å–∫–∞—è</option>
                <option value="–µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—è">–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è</option>
                <option value="—Ä—É—Å—Å–∫–∞—è">–†—É—Å—Å–∫–∞—è</option>
                <option value="–∞–≤—Ç–æ—Ä—Å–∫–∞—è">–ê–≤—Ç–æ—Ä—Å–∫–∞—è</option>
                <option value="–º–æ—Ä—Å–∫–∞—è">–ú–æ—Ä—Å–∫–∞—è</option>
            </select>

            <label>–¢–∏–ø:</label>
            <select id="cat-place-type">
                <option value="">–í—Å–µ</option>
                <option value="–∫–∞—Ñ–µ">–ö–∞—Ñ–µ</option>
                <option value="–ø–∞–±">–ü–∞–±</option>
                <option value="–±–∞—Ä">–ë–∞—Ä</option>
                <option value="–ø–∏—Ü—Ü–µ—Ä–∏—è">–ü–∏—Ü—Ü–µ—Ä–∏—è</option>
                <option value="—Ä–µ—Å—Ç–æ—Ä–∞–Ω">–†–µ—Å—Ç–æ—Ä–∞–Ω</option>
            </select>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è -->
        <div id="accommodation-filters" class="hidden">
            <h4>–§–∏–ª—å—Ç—Ä—ã</h4>
            <label>–¶–µ–Ω–∞:</label>
            <select id="accommodation-price">
                <option value="" selected>–í—Å–µ</option>
                <option value="0-1000">–î–æ 1000</option>
                <option value="1000-2000">–û—Ç 1000 –¥–æ 2000</option>
                <option value="2000-3000">–û—Ç 2000 –¥–æ 3000</option>
                <option value="3000-1000000">–û—Ç 3000 –∏ –≤—ã—à–µ</option>
            </select>

            <label>–†–µ–π—Ç–∏–Ω–≥:</label>
            <select id="accommodation-rating">
                <option value="" selected>–í—Å–µ</option>
                <option value="0-3.0">–î–æ 3.0</option>
                <option value="3.0-4.5">–û—Ç 3.0 –¥–æ 4.5</option>
                <option value="4.5-5.0">–û—Ç 4.5 –¥–æ 5.0</option>
                <option value="5.0-7.0">–û—Ç 5.0 –¥–æ 7.0</option>
                <option value="7.0-100.0">–û—Ç 7.0</option>
            </select>
        </div>

        <button id="density-map">–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å</button>

        <!--wordcloud-->
    <div class="wordcloud-container">
        <div>
        <h3>–°–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤</h3>
        <select id="business-type-wordcloud">
            <option value="public_eating">–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ</option>
            <option value="accommodation_places">–ú–µ—Å—Ç–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</option>
        </select>
        <h3>–¢–∏–ø –æ—Ç–∑—ã–≤–æ–≤</h3>
        <select id="type-phrase">
            <option value="pros">–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ</option>
            <option value="cons">–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ</option>
        </select>
        </div>
        <button id="wordcloud-button">–°–æ–∑–¥–∞—Ç—å –æ–±–ª–∞–∫–æ —Å–ª–æ–≤</button>
    </div>
    </div>

    <div class="map-container">
        <iframe id="map-frame" src="{{ url_for('static', filename=map_file) }}"></iframe>
    </div>

    
    <script>
        document.getElementById("update-map").addEventListener("click", function () {
        const businessType = document.getElementById("business-type").value;
        const weights = {
        other_object_count_score: document.getElementById("weight-other").value,
        distance_to_route_score: document.getElementById("weight-distance").value,
        landmark_count_score: document.getElementById("weight-landmark").value,
        object_count_score: document.getElementById("weight-density").value,
        degree_landshaft_zone_score: document.getElementById("weight-zone").value
    };

    fetch("/update_map", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            business: businessType,
            weights: weights
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.map_file) {
            document.getElementById("map-frame").src = "/static/" + data.map_file;
        }
    });
            $("#switch-map").click(function() {
                $.post("/switch_map", function(data) {
                    $("#map-frame").attr("src", data.map_file + "?v=" + new Date().getTime());
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –±–∏–∑–Ω–µ—Å–∞
            $("#density_obj").change(function() {
                let selectedType = $(this).val();
                $(".hidden").hide(); // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ñ–æ—Ä–º—ã
                if (selectedType === "public_eating") {
                    $("#public-eating-filters").show();
                } else if (selectedType === "accommodation_places") {
                    $("#accommodation-filters").show();
                }
            });

            // –ö–Ω–æ–ø–∫–∞ "–§–∏–ª—å—Ç—Ä—ã" - —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ
            $("#toggle-filters").click(function() {
                let selectedType = $("#density_obj").val();
                if (selectedType === "public_eating") {
                    $("#public-eating-filters").toggle();
                } else if (selectedType === "accommodation_places") {
                    $("#accommodation-filters").toggle();
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å"
            $("#density-map").click(function() {
                let selectedType = $("#density_obj").val();
                let filterData = {};

                if (selectedType === "public_eating") {
                    filterData = {
                        type: selectedType,
                        price: $("#cat-price").val(),
                        rating: $("#cat-rating").val(),
                        cuisine: $("#cat-cuisine").val(),
                        placeType: $("#cat-place-type").val()
                    };
                } else if (selectedType === "accommodation_places") {
                    filterData = {
                        type: selectedType,
                        price: $("#accommodation-price").val(),
                        rating: $("#accommodation-rating").val()
                    };
                }
                else if (selectedType === "landmarks") {
                    filterData = {
                        type: selectedType
                    };
                }


                console.log(filterData); // –í—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å (–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä)
                
                $.post("/density_map", filterData, function(data) {
                    $("#map-frame").attr("src", data.map_file + "?v=" + new Date().getTime());
                });
            
            });
        });


        //–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤
        document.getElementById("wordcloud-button").addEventListener("click", function () {
    const businessType = document.getElementById("business-type-wordcloud").value;
    const phraseType = document.getElementById("type-phrase").value;

    fetch("/create_wordcloud", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            business_type: businessType,
            phrase_type: phraseType
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.wordcloud_path) {
            // –í—Å—Ç–∞–≤–ª—è–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            let img = document.getElementById("wordcloud-img");
            if (!img) {
                img = document.createElement("img");
                img.id = "wordcloud-img";
                document.querySelector(".wordcloud-container").appendChild(img);
            }
            img.src = data.wordcloud_path + "?v=" + new Date().getTime(); // —á—Ç–æ–±—ã –Ω–µ –∫–µ—à–∏—Ä–æ–≤–∞–ª–æ—Å—å
        }
    });
});

// –û—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–≥–æ –æ–∫–Ω–∞
document.getElementById("help-button").addEventListener("click", function () {
    document.getElementById("help-modal").style.display = "block";
});

document.querySelector(".close-button").addEventListener("click", function () {
    document.getElementById("help-modal").style.display = "none";
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–∫–Ω–∞
window.addEventListener("click", function (event) {
    const modal = document.getElementById("help-modal");
    if (event.target === modal) {
        modal.style.display = "none";
    }
});
    </script>
</body>
</html>